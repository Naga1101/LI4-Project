@page "/register"
@using JBleiloes.Components.Layout
@using JBleiloes.data
@layout LoginLayout
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<h3>Register</h3>

<div class="form-group">
    <label for="username">Username:</label>
    <input id="username" @bind="username" class="form-control" />
</div>

<div class="form-group">
    <label for="password">Password:</label>
    <input id="password" @bind="password" type="password" class="form-control" />
</div>

<div class="form-group">
    <label for="nome">Nome:</label>
    <input id="nome" @bind="nome" class="form-control" />
</div>

<div class="form-group">
    <label for="email">Email:</label>
    <input id="email" @bind="email" type="email" class="form-control" />
</div>

<div class="form-group">
    <label for="nCC">Nº_CC:</label>
    <input id="nCC" @bind="n_cc" class="form-control" />
</div>

<div class="form-group">
    <label for="nif">NIF:</label>
    <input id="nif" @bind="NIF" class="form-control" />
</div>

<div class="form-group">
    <label for="dataNascimento">Data Nascimento:</label>
    <input id="dataNascimento" @bind="data_nascimento" class="form-control" />
</div>

<button class="btn btn-primary" @onclick="registo">Register</button>


@code {

    public string username { get; private set; }
    public string password { get; private set; }
    public string nome { get; private set; }
    public string email { get; private set; }
    public int n_cc { get; private set; }
    public int NIF { get; private set; }
    public string data_nascimento { get; private set; }

    private bool AllFieldsFilled()
    {
        bool allFilled =
            !string.IsNullOrWhiteSpace(username)
            && !string.IsNullOrWhiteSpace(password)
            && !string.IsNullOrWhiteSpace(nome)
            && !string.IsNullOrWhiteSpace(email)
            && n_cc != 0
            && NIF != 0
            && !string.IsNullOrWhiteSpace(data_nascimento);

        return allFilled;
    }

    private void registo()
    {
        if (!AllFieldsFilled())
        {

        }
        else
        {
            //falta cond de validar se nao existe ninguem com mesmos dadso
            JBLeiloes jb = new JBLeiloes();
            Console.WriteLine(nome);
            jb.registerUser(username, password, nome, email, n_cc, NIF, data_nascimento);
            NavigationManager.NavigateTo("/");
        }
    }

}